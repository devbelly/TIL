![image](https://github.com/devbelly/TIL/assets/67682840/48aacc66-5380-4e6e-89f5-058bacad0584)


# 1장. 쿠버네티스 소개

- 모놀리스 애플리케이션의 확장
	- 수직확장 : CPU, 메모리 등 하드웨어 장치의 업그레이드
		- 상한이 존재한다
	- 수평확장: 서버를 여러대 증설
		- 코드의 변경이 이루어져야한다
		- 항상 적용되는 것은 아니다.
- 마이크로서비스의 필요성이 나타나게 된다
	- 개발자가 잘 이해하고 있는 HTTP, AMQP 프로토콜을 통해 마이크로서비스간 통신을 한다
		- 최근에는 gRPC, RSocket을 활용한다
	- 하나의 구성요소가 변경되더라도 전체를 변경하지 않아도 된다
- 마이크로서비스의 단점
	- 규모가 커지면 각 구성요소들을 배포 및 관리하는 것이 어려워진다.
	- 분산된 환경에서 원격 호출하므로 디버깅 및 추적이 어렵다 → Zipkin으로 해결가능

## 1.2 컨테이너 기술 소개

- 하나의 호스트에서 각 애플리케이션마다 종속성 및 요구사항을 동시에 만족하는 것은 굉장히 어렵다
- 또한 개발자 및 운영자가 실행하는 애플리케이션 환경이 다르다
	- 마이크로서비스가 많지 않다면 VM을 통해서 운영체제 인스턴스를 제공 → 환경을 격리할 수 있다.
	- 서비스의 크기가 작아지고 갯수가 많아지면 일일이 VM을 통해서 환경을 격리한다면?
		- 하드웨어 리소스가 낭비된다
		- 일일이 관리해야하므로 인적자원이 낭비된다.
- VM 대신 리눅스 컨테이너 기술에 눈을 돌리게 되었다.
- VM와 리눅스 컨테이너
	- 차이점
		- VM은 애플리케이션이 가상화된 OS 커널에 대한 syscall을 호출 → 커널이 하이퍼바이저를 통해 물리적 CPU를 조작
		- 컨테이너는 호스트 OS와 동일한 커널에서 syscall 호출
	- 특징
		- VM은 서로 다른 커널을 보유하므로 완전한 격리를 제공한다.
		- 컨테이너는 동일한 커널을 사용하므로 보안상 완전한 격리를 제공하지 못한다
		- 실행되는 프로세스의 수가 적으면 VM, 많다면 컨테이너를 고려하자
- 리눅스 컨테이너의 기반 기술
	- namespace : 각 커널 리소스마다 가상화된 환경을 제공하여 리소스간 분리를 가능케 한다
	- cgroup : 얼마나 자원을 할당할 지 결정할 수 있다.
- 리눅스 컨테이너 기술을 쉽게 사용할 수 있도록 하는 기술이 도커
	- 애플리케이션 패키징 배포 관리 기능을 제공한다.
- 도커 컨테이너 이미지 vs VM 이미지 차이
	- 도커 컨테이너는 레이어로 이루어져 있어 다룬 이미지를 다운할 때 동일한 레이어가 있다면 나머지 레이어만 다운
- 