 <p align="center">
	<img src="https://github.com/devbelly/TIL/assets/67682840/420a6940-d457-4573-8ccd-f421463d4e09">
</p>
# 1장. 아마존 비즈니스 민첩성의 비밀

### 1.1.1 성공사례 : 아마존의 빠른 배포속도가 의미하는 것은 무엇일까?
- 2019년 아마존은 초당 1.5번의 배포를 했다고 한다.
- 위 지표는 결국 비즈니스 민첩성을 나타내고 시장 변화에 빠르게 적응한다는 뜻이다.

### 1.1.2 성공원인 첫번째, 클라우드 인프라의 등장
- 예전에는 인프라를 구축하는데 시간이 매우 오래 걸려서 애플리케이션을 개발할 여유가 되도 시간이 오래걸렸다.
- 클라우드 회사의 등장으로 이 문제가 해결됨.

### 1.1.3 클라우드 인프라에 어울리는 애플리케이션 조건
- 인프라와 애플리케이션을 나눠서 보자
- 클라우드 인프라의 등장으로 필요할때만 인프라를 증설해서 트래픽에 대처하고 다시 인프라를 반납할 수 있다.
- 애플리케이션도 필요한 부분만 수정해서 배포하면 좋지 않을까?

> [!faq] 왜 마이크로서비스로 구성했는가?
> - 애플리케이션의 특정 모듈에만 트래픽이 예상된다면 해당 모듈만 scale-up, scale-out 하면 되기 때문에 효율적이다.
> - 변경된 모듈만 재배포하면 되므로 가볍다

## 1.2 마이크로서비스란 무엇인가?

> [!faq] 모놀리틱서비스란 무엇인가?
> - 논리적으로 하나의 단일체로 구분되며 작은 배포에도 전체가 재배포되는 거대한 서비스를 의미한다.
> - 애플리케이션이 수평확장 되어있을 때 작은 변경에도 모든 애플리케이션을 재배포해야한다.
> - 하나의 데이터베이스만 사용하므로 데이터베이스는 탄력적으로 대응할 수 없다는 단점이 있다.

> [!faq] 마이크로서비스란 무엇인가?
> - 서버가 여러개의 서비스로 나뉘어서 여러 인스턴스가 논리적으로 하나의 서비스를 제공하는 형태

> [!faq] 모놀리틱과 비교했을 때 어떠한 이점을 갖나요?
> - 각기 다른 저장소를 가지고 있을 수 있다.
> - 각 서비스 마다 다른 언어로 개발할 수 있다.
> - 분리된 서비스 단위로 빌드 및 배포하여 효율적이다.

### 1.2.2 SOA와 마이크로서비스

> [!faq] SOA와 마이크로서비스는 어떠한 차이가 있나요? 그리고 차이를 가능케한 MSA 만의 특징이 있나요?
> - SOA와 마이크로서비스는 분리된 서비스를 합쳐 논리적으로 하나의 큰 서비스를 제공한다는 측면에서는 비슷하다.
> - SOA는 개념적으로만 존재했지만 MSA는 이를 실현하여 성공한 사례가 많다.
> - SOA는 하나의 데이터베이스를 사용하여 개념적으로는 분리했지만 구현상으로는 데이터의 강결합 문제가 발생했다.
> - MSA는 각 서비스마다 저장소를 두고 다른 서비스의 저장소를 직접 호출하는 대신 API 를 통해 접근하도록 함으로써 저장소의 분리를 성공시켰다.

> [!faq] 2단계 커밋을 마이크로서비스에서는 왜 사용하지 못하나요?
> - NoSQL처럼 2단계 커밋을 지원하지 않을 수 있따.
> - 느슨한 결합이 목적인 MSA에서 데이터베이스간 강결합이 발생한다

> [!faq] 결과적 일관성에 대해 설명해주세요
> - 저장소마다 로컬트랜잭션을 수행하고 특정 순간에는 데이터의 불일치가 있을 수 있지만 보상트랜잭션을 통해 결과적으로는 데이터 일관성을 갖게된다는 의미입니다.


# 2장. MSA 이해

> [!faq] 아키텍쳐라는 단어는 무슨뜻일까요?
> - 소프트웨어 구성요소와 구성요소간의 관계를 나타내는 단어입니다. 

#### VM과 컨테이너

> [!faq] VM과 컨테이너의 차이점은 무엇일까요?
> - VM은 하이퍼바이저 위에 여러개의 OS 게스트가 올라가있는 형태이다
> - 컨테이너는 컨테이너 엔진 위에 이미지를 실행하는 형태.
> - VM은 운영체제 패치 및 라이브러리 설치에 오버헤드가 발생하지만 컨테이너는 이러한 오버헤드가 발생하지 않는다.

> [!faq] 도커의 장점이 무엇일까요?
> - 이식성
> - 가벼움
> - 재사용성

#### 다양한 서비스의 등록 및 탐색을 위한 서비스 레지스트리, 서비스 디스커버리 패턴

> [!faq] 서비스 디스커버리 패턴은 무엇인가요?
> - 원격 서비스에 접근하기 위해서는 IP와 Port 정보를 알아야하지만 컨테이너 기반 환경에서는 IP가 변경되는 일이 잦다.
> - 서비스가 등록될 때 서비스 레지스트리에 서비스의 IP와 포트 정보를 등록하고 클라이언트는 서비스 레지스트리에 접근해서 서비스에 대한 접근 정보를 알아가는 패턴이 서비스 디스커비리이다.


> [!faq] BFF 패턴은 무엇인가요?
> - Backend for Frontend
> - 다양한 종류의 클라이언트들이 많아짐에 따라 클라이언트마다 사용할 API 조합을 백엔드에서 제공하는 형태이다.
> - 클라이언트마다 BFF 서버를 두고 BFF 들이 하나의 API 게이트 웨이를 바라보게 하면 인증/인가를 한 곳에서 처리할 수 있다.

#### 외부 저장소 패턴

> [!faq] 외부 저장소가 무엇인지 말하고 외부 저장소 패턴이 필요한 이유는 무엇인가요?
> -  외부 설정 정보를 저장하는 곳을 외부 저장소라고 한다. 클라우드 환경에서 설정 정보가 애플리케이션에 포함되어있으면 정보 변경시 재배포 되어야하고 이는 서비스 중단으로 이어진다. 외부 저장소에 설정 정보를 저장하고 동적으로 애플리케이션을 읽어오면 이 문제를 해결할 수 있다.
> - 쿠버네티스에서 ConfigMap 등을 제공한다


#### 장애 및 실패 처리를 위한 서킷 브레이커 패턴

> [!faq] 서킷 브레이커 패턴에 대해 설명해주세요
> - 마이크로서비스에서 가장 문제가 많이 발생하는 원인은 아이러니하게도 서비스 분리이다. A 서비스가 B 서비스에 의존하고 있을 때 B 서비스에 장애가 발생하면 A까지 장애가 전파된다. 이를 해결하기 위해 서킷 브레이커 패턴이 도입. B 서비스에 장애가 발생하면 여러번 리트라이 이후 대체 응답을 클라이언트에 리턴하고 나중에 B가 정상화되면 다시 클라이언트에게 정상 응답을 돌려주는 패턴이다.


#### 서비스 메시 패턴

> [!faq] 서비스 메시 패턴에 대해 설명해주세요

#### 분산 트랜잭션 처리 패턴


---
메모
- 2단계 커밋
- 세션










